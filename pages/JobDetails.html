<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AIConnect - Job Details</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Page CSS (only for this page) -->
  <link rel="stylesheet" href="../assets/css/jobdetails.css">
</head>

<body class="ai-bg">

  <div class="container py-4 py-md-5">

    <!-- Top bar -->
    <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3 mb-4">
      <div>
        <h2 class="page-title mb-1">Job Details</h2>
        <p class="page-subtitle mb-0">Read the offer, then swipe to decide (Demo).</p>
      </div>

      <div class="d-flex gap-2">
        <a href="RecommendedOffers.html" class="btn btn-outline-light btn-sm rounded-pill px-3">Back</a>
        <a href="StudentDashboard.html" class="btn btn-info btn-sm rounded-pill px-3 text-dark fw-bold">Dashboard</a>
      </div>
    </div>

    <!-- Main glass section -->
    <div class="glass-section">

      <div class="row g-4 align-items-start">
        <!-- Swipe Card -->
        <div class="col-12 col-lg-7">
          <h5 class="text-white mb-3">Swipe to decide</h5>

          <div class="swipe-area">
            <div id="swipeCard" class="swipe-card">
              <div class="d-flex justify-content-between align-items-start gap-3">
                <div>
                  <h4 class="text-white mb-1">Backend Developer Intern</h4>
                  <div class="meta">TechBridge Solutions · Amman</div>
                  <div class="meta-small">Internship · On-site · Posted: 2025-11-25</div>
                  <div class="mt-2">
                    <span class="score-badge">92% Match</span>
                  </div>
                </div>

                <div class="text-end">
                  <span class="tag">Internship</span>
                  <span class="tag">On-site</span>
                  <span class="tag">Backend</span>
                </div>
              </div>

              <hr class="soft-hr my-3">

              <p class="text-white-50 mb-0">
                Drag the card <b>right</b> to accept, <b>left</b> to reject.
              </p>

              <div class="swipe-hints mt-3">
                <span class="hint-left">Reject</span>
                <span class="hint-right">Accept</span>
              </div>
            </div>
          </div>

          <!-- Fallback buttons (important) -->
          <div class="d-flex flex-column flex-md-row gap-2 mt-4">
            <button id="rejectBtn" class="btn btn-outline-light rounded-pill w-100 py-2 fw-bold">
              Reject (Swipe Left)
            </button>
            <button id="acceptBtn" class="btn btn-info rounded-pill w-100 py-2 fw-bold text-dark">
              Accept (Swipe Right)
            </button>
          </div>

          <div id="swipeResult" class="text-center mt-3 text-white-50"></div>

          <div class="text-center mt-3">
            <a href="ContactSupport.html" class="support-link">Need help? Contact Support</a>
          </div>
        </div>

        <!-- Details -->
        <div class="col-12 col-lg-5">
          <h5 class="text-white mb-3">Offer details</h5>

          <div class="mini-card mb-3">
            <h6 class="text-white mb-2">Description</h6>
            <p class="text-white-50 mb-0">
              Assist in building backend APIs, integrating databases, and supporting web applications.
              Suitable for students interested in PHP/MySQL and REST APIs.
            </p>
          </div>

          <div class="mini-card mb-3">
            <h6 class="text-white mb-2">Requirements</h6>
            <ul class="text-white-50 mb-0">
              <li>Basic PHP and SQL knowledge</li>
              <li>REST APIs fundamentals</li>
              <li>Git basics</li>
              <li>Teamwork and communication</li>
            </ul>
          </div>

          <div class="mini-card">
            <h6 class="text-white mb-2">Note (Project 2)</h6>
            <p class="text-white-50 mb-0">
              After <b>Accept</b>, a second AI model can generate a professional email on behalf of the student to the company.
            </p>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script>
document.addEventListener('DOMContentLoaded', () => {
  const card = document.getElementById('swipeCard');
  const result = document.getElementById('swipeResult');
  const acceptBtn = document.getElementById('acceptBtn');
  const rejectBtn = document.getElementById('rejectBtn');

  // Safety: إذا أي عنصر مش موجود، لا تعمل شي (بدون Errors)
  if (!card || !result || !acceptBtn || !rejectBtn) return;

  let startX = 0;
  let currentX = 0;
  let dragging = false;

  function setResult(text) {
    result.textContent = text;
  }

  function resetCard() {
    card.style.transform = 'translateX(0px) rotate(0deg)';
    card.style.opacity = '1';
  }

  function finish(action) {
    if (action === 'accept') {
      card.style.transform = 'translateX(500px) rotate(20deg)';
      card.style.opacity = '0';
      setResult('Accepted ✅');
    } else {
      card.style.transform = 'translateX(-500px) rotate(-20deg)';
      card.style.opacity = '0';
      setResult('Rejected ❌');
    }

    // رجّع الكرت بعد شوي (اختياري)
    setTimeout(() => {
      resetCard();
      setResult('');
    }, 800);
  }

  function onPointerDown(e) {
    dragging = true;
    startX = e.clientX;
    card.setPointerCapture(e.pointerId);
  }

  function onPointerMove(e) {
    if (!dragging) return;
    currentX = e.clientX - startX;
    const rotate = Math.max(-12, Math.min(12, currentX / 18));
    card.style.transform = `translateX(${currentX}px) rotate(${rotate}deg)`;
  }

  function onPointerUp() {
    if (!dragging) return;
    dragging = false;

    const threshold = 120;

    if (currentX > threshold) {
      finish('accept');
    } else if (currentX < -threshold) {
      finish('reject');
    } else {
      resetCard();
    }
    currentX = 0;
  }

  card.addEventListener('pointerdown', onPointerDown);
  card.addEventListener('pointermove', onPointerMove);
  card.addEventListener('pointerup', onPointerUp);
  card.addEventListener('pointercancel', onPointerUp);

  acceptBtn.addEventListener('click', () => finish('accept'));
  rejectBtn.addEventListener('click', () => finish('reject'));
});
</script>

</body>
</html>
